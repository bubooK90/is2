import{g as w,r as i,a as f,o as v,c as x,b as t,m as y,w as r,v as p,d as g,_ as $,F as V,f as C,e as j,u as S,V as B}from"./index-e46bce11.js";import{f as U}from"./Footer-149bb9d9.js";const N={class:"fixed left-0 top-0 right-0 bottom-0 overflow-x-hidden overflow-y-scroll"},T=t("div",{class:"h-[120px]"},null,-1),A={key:0,class:"h-[80px] flex justify-center items-center px-5 text-2xl font-bold text-stone-900/80"},M=t("div",{class:"fixed top-[120px] left-0 right-0 h-[50px] px-10 flex flex-row-reverse items-center text-lg"},[t("div",{class:"bg-stone-700 text-stone-100/80 font-bold flex items-center px-5 h-full"},"我的信息")],-1),P={class:"mt-24 w-[300px] mx-auto"},z=t("div",{class:"mb-2 text-sm"},"姓名或笔名",-1),F={class:"bg-stone-300/80 mb-5"},J=t("div",{class:"mb-2 text-sm"},"自我介绍",-1),O={class:"bg-stone-300/80 mb-5"},D={class:"text-right"},E={class:"mt-10 w-[300px] mx-auto"},I=t("div",{class:"mb-2 text-sm"},"旧密码",-1),q={class:"bg-stone-300/80 mb-5"},G=t("div",{class:"mb-2 text-sm"},"新密码",-1),H={class:"bg-stone-300/80 mb-5"},K={class:"text-right"},L={__name:"profile",setup(Q){const{proxy:o}=w(),u=i(!!o.$cookies.get("intelli-token")),l=i(),a=i(""),c=i(""),d=i(""),m=i(""),_=e=>{u.value=e},b=()=>{f.post(o.$util.settings.api+"/intelli/my/profile/update",JSON.stringify({sn:a.value,cp:c.value}),{headers:{Authorization:"Bearer "+o.$cookies.get("intelli-token"),accept:"application/json","Content-Type":"application/json"}}).then(function(e){e.data.res=="ok"&&l.value.show("个人信息修改成功")}).catch(function(e){console.log(e)})},k=()=>{f.post(o.$util.settings.api+"/intelli/my/profile/password",JSON.stringify({sn:d.value,cp:m.value}),{headers:{Authorization:"Bearer "+o.$cookies.get("intelli-token"),accept:"application/json","Content-Type":"application/json"}}).then(function(e){e.data.res=="ok"?(l.value.show("登录密码修改成功，请重新登录"),setTimeout(()=>{o.$cookies.remove("intelli-token"),o.$cookies.remove("intelli-username"),o.$cookies.remove("intelli-artwork"),o.$cookies.remove("intelli-comprtition"),o.$cookies.remove("intelli-comprtitions"),o.$util.gotoPage("")},3e3)):l.value.show(e.data.error)}).catch(function(e){console.log(e)})};return f.get(o.$util.settings.api+"/intelli/my/profile",{headers:{Authorization:"Bearer "+o.$cookies.get("intelli-token"),accept:"application/json","Content-Type":"application/json"}}).then(function(e){a.value=e.data.name,c.value=e.data.desc}).catch(function(e){console.log(e)}),(e,s)=>(v(),x(V,null,[t("div",N,[T,u.value?y("",!0):(v(),x("div",A,"尚 未 登 录")),M,t("div",P,[z,t("div",F,[r(t("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>a.value=n),type:"text",class:"w-full text-sm bg-transparent border-none focus:ring-0"},null,512),[[p,a.value]])]),J,t("div",O,[r(t("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>c.value=n),type:"text",class:"w-full text-sm bg-transparent border-none focus:ring-0"},null,512),[[p,c.value]])]),t("div",D,[t("button",{class:"px-5 py-2 bg-stone-700 text-stone-100/80 font-bold",onClick:s[2]||(s[2]=n=>b())},"修改信息")])]),t("div",E,[I,t("div",q,[r(t("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>d.value=n),type:"text",class:"w-full text-sm bg-transparent border-none focus:ring-0"},null,512),[[p,d.value]])]),G,t("div",H,[r(t("input",{"onUpdate:modelValue":s[4]||(s[4]=n=>m.value=n),type:"text",class:"w-full text-sm bg-transparent border-none focus:ring-0"},null,512),[[p,m.value]])]),t("div",K,[t("button",{class:"px-5 py-2 bg-stone-700 text-stone-100/80 font-bold",onClick:s[5]||(s[5]=n=>k())},"修改密码")])]),g(U)]),g($,{page:"",signup:u.value,onUpdateStatus:_,onShowMessage:e.showMessage},null,8,["signup","onShowMessage"]),g(C,{ref_key:"message",ref:l},null,512)],64))}},h=j(L);h.config.globalProperties.$util=S;h.use(B).mount("#app");
